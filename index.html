<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="益达的博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="益达的博客">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="益达的博客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>益达的博客</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">益达的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/10/iOS设计文档/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yida">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="益达的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/10/iOS设计文档/" itemprop="url">Trip-to-iOS-Design-Patterns</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-10T10:11:12+08:00">
                2018-12-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Trip-to-iOS-Design-Patterns"><a href="#Trip-to-iOS-Design-Patterns" class="headerlink" title="Trip-to-iOS-Design-Patterns"></a>Trip-to-iOS-Design-Patterns</h1><p>iOS 设计模式相关资料整理<br>随着写代码时间变长，业务逻辑越来越复杂，项目就会变的越来越臃肿，业务的拓展、Bug Fix将会越来越难进展。接着进行的就是重构工作，对重构而已，那设计模式、架构、当前的业务情况、将来可能遇到的需求 将是下一步的思考。本文将从设计模式、架构、实践三个方面梳理 iOS 架构设计。</p>
<h4 id="必读文章"><a href="#必读文章" class="headerlink" title="必读文章"></a>必读文章</h4><ul>
<li><a href="https://www.raywenderlich.com/46988/ios-design-patterns" target="_blank" rel="noopener">iOS Design Patterns</a> <blockquote>
<p>文章从 iOS 视角解读了常用的几种设计模式，并给出了代码示例，非常推荐看英文原文，作为设计模式开篇也比较合适，实战性也强。<br>翻译 <a href="http://blog.jobbole.com/48115/" target="_blank" rel="noopener">一</a> <a href="http://blog.jobbole.com/48166/" target="_blank" rel="noopener">二</a> <a href="http://blog.jobbole.com/48254/" target="_blank" rel="noopener">三</a> <a href="http://blog.jobbole.com/48179/" target="_blank" rel="noopener">四</a></p>
</blockquote>
</li>
</ul>
<h4 id="设计模式-经典图书系列"><a href="#设计模式-经典图书系列" class="headerlink" title="设计模式 经典图书系列"></a>设计模式 经典图书系列</h4><ul>
<li><p>《Head First设计模式》 <a href="https://www.amazon.cn/Head-First%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%BC%97%E9%87%8C%E6%9B%BC/dp/B0011FBU34/ref=sr_1_1?ie=UTF8&amp;qid=1464418055&amp;sr=8-1&amp;keywords=head+first" target="_blank" rel="noopener">纸质版-亚马逊</a>  <a href="http://download.csdn.net/detail/kiratianyi/7471435" target="_blank" rel="noopener">电子版-PDF-CSDN</a></p>
</li>
<li><p>《大话设计模式》<a href="https://www.amazon.cn/%E5%A4%A7%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E7%A8%8B%E6%9D%B0/dp/B0011FHN5S/ref=sr_1_1?ie=UTF8&amp;qid=1464418409&amp;sr=8-1&amp;keywords=%E5%A4%A7%E8%AF%9D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">纸质版-亚马逊</a>  <a href="http://download.csdn.net/detail/yousuosi/4364766" target="_blank" rel="noopener">源码及电子书-CSDN</a>  <a href="https://github.com/huang303513/Design-Pattern-For-iOS" target="_blank" rel="noopener">iOS版源码</a></p>
</li>
<li><p>《设计模式》- Gof <a href="https://www.amazon.cn/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6%E4%B8%9B%E4%B9%A6-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8F%AF%E5%A4%8D%E7%94%A8%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%9F%BA%E7%A1%80-Erich-Gamma/dp/B001130JN8/ref=sr_1_1?ie=UTF8&amp;qid=1464419128&amp;sr=8-1&amp;keywords=%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">纸质版-亚马逊</a>  <a href="http://download.csdn.net/detail/trendgrucee/4795224" target="_blank" rel="noopener">电子书-PDF-CSDN</a></p>
</li>
<li><p>《Objective-C编程之道：iOS 设计模式》 <a href="https://www.amazon.cn/Objective-C%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%81%93-iOS%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%A7%A3%E6%9E%90-%E9%92%9F%E5%86%A0%E8%B4%A4/dp/B0065V3ALO/ref=sr_1_1?ie=UTF8&amp;qid=1464418960&amp;sr=8-1&amp;keywords=Objective-C%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%81%93%EF%BC%9AiOS+%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="noopener">纸质书-亚马逊</a>  <a href="http://download.csdn.net/detail/qiaokeli123456789/6691097" target="_blank" rel="noopener">电子书及源码</a></p>
</li>
</ul>
<h4 id="设计模式-资源推荐"><a href="#设计模式-资源推荐" class="headerlink" title="设计模式 资源推荐"></a>设计模式 资源推荐</h4><ul>
<li><p>Cocoa Design Patterns  <a href="https://developer.apple.com/legacy/library/documentation/Cocoa/Conceptual/CocoaFundamentals/CocoaDesignPatterns/CocoaDesignPatterns.html#//apple_ref/doc/uid/TP40002974-CH6-SW6" target="_blank" rel="noopener">官方资料</a>  <a href="http://download.csdn.net/detail/sc_cheng/2981710" target="_blank" rel="noopener">中文翻译版</a></p>
</li>
<li><p><a href="http://blog.csdn.net/lovelion/article/details/17517213" target="_blank" rel="noopener">史上最全设计模式导学目录（完整版)</a> </p>
<blockquote>
<p>强烈推荐，推荐指数五颗星，刘伟老师力作，讲的非常好，通俗易懂，而且举例的应用场景也非常恰当，遗憾的是样例代码是 Java 写的，不过模式是通用的。</p>
</blockquote>
</li>
<li><p><a href="http://design-patterns.readthedocs.org/zh_CN/latest/index.html" target="_blank" rel="noopener">图说设计模式</a></p>
<blockquote>
<p>推荐指数4颗星，讲了不少UML的相关知识，能更好的理解设计模式中时序图等Mac下的UML工具推荐 StarUML ,做的也不错。</p>
</blockquote>
</li>
<li><p><a href="https://github.com/ochococo/Design-Patterns-In-Swift" target="_blank" rel="noopener">Design-Patterns-In-Swift</a></p>
</li>
</ul>
<h4 id="InfoQ-iOS应用架构谈-推荐指数-5星"><a href="#InfoQ-iOS应用架构谈-推荐指数-5星" class="headerlink" title="InfoQ - iOS应用架构谈 - 推荐指数 5星"></a>InfoQ - iOS应用架构谈 - 推荐指数 5星</h4><ul>
<li><a href="http://casatwy.com/iosying-yong-jia-gou-tan-kai-pian.html" target="_blank" rel="noopener">iOS应用架构谈（一）：架构设计的方法论</a></li>
<li><a href="http://casatwy.com/iosying-yong-jia-gou-tan-viewceng-de-zu-zhi-he-diao-yong-fang-an.html" target="_blank" rel="noopener">iOS应用架构谈（二）：View层的组织和调用方案</a></li>
<li><a href="http://casatwy.com/iosying-yong-jia-gou-tan-wang-luo-ceng-she-ji-fang-an.html" target="_blank" rel="noopener">iOS应用架构谈（三）：网络层设计方案</a></li>
<li><a href="http://casatwy.com/iosying-yong-jia-gou-tan-ben-di-chi-jiu-hua-fang-an-ji-dong-tai-bu-shu.html" target="_blank" rel="noopener">iOS应用架构谈（四）：本地持久化方案及动态部署</a></li>
</ul>
<h4 id="App-架构设计实践"><a href="#App-架构设计实践" class="headerlink" title="App 架构设计实践"></a>App 架构设计实践</h4><ul>
<li><a href="https://www.sdk.cn/news/2023" target="_blank" rel="noopener">饿了么移动APP的架构演进</a></li>
<li><a href="http://www.infoq.com/cn/news/2016/03/lixianhui-interview" target="_blank" rel="noopener">滴滴iOS客户端的架构演变之路</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MjM5MDE0Mjc4MA==&amp;mid=403412672&amp;idx=1&amp;sn=2cceb873ee4640830aad3261ae177df5&amp;scene=0&amp;key=710a5d99946419d9ba63d1d480eb3f0c2d49be9d244f34e460226b2f4caaa02565fc4d16af8f64ca79085f4db276e89f&amp;ascene=0&amp;uin=MjY1NTg0NzMyMQ%3D%3D&amp;devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.11.4+build(15E65" target="_blank" rel="noopener">携程移动App架构优化之旅</a>&amp;version=11020201&amp;pass_ticket=JxdNVNrS%2BerOsvJdjWQGHAqgDkV2%2FmL9OHAETsCT%2Bvp0%2B%2FLiXasOwpgYIsgQQn8O)<a href="http://www.stuq.org/ppt/frame_show/659/4c79d4c7eb2061f8790b5e7e6fe42703#/1" target="_blank" rel="noopener">PPT</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODg4MDk0Ng==&amp;mid=2651112273&amp;idx=1&amp;sn=893a66a04e541a99b7bc4d7cf227e2f7#rd" target="_blank" rel="noopener">新浪微博iOS客户端架构与优化之路</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODg4MDk0Ng==&amp;mid=2651112231&amp;idx=1&amp;sn=4578ff1009ee774093c45a3d8c19dd58#rd" target="_blank" rel="noopener">Weex详解：移动端高性能动态化方案</a></li>
<li><a href="http://www.infoq.com/cn/articles/evolution-of-facebook-ios-app-ten-years-technology" target="_blank" rel="noopener">覃超：Facebook iOS App技术演化十年之路</a></li>
<li><a href="http://blog.csdn.net/yaoyu/article/details/70184539" target="_blank" rel="noopener">天弘基金移动App客户端架构优化之路</a></li>
<li><a href="http://tech.glowing.com/cn/service-oriented-ios-architecture/" target="_blank" rel="noopener">Service Oriented 的 iOS 应用架构</a></li>
<li><a href="http://gracelancy.com/blog/2016/01/06/ape-ios-arch-design/" target="_blank" rel="noopener">猿题库 iOS 客户端架构设计</a></li>
<li><a href="http://www.infoq.com/cn/articles/alibaba-mobile-infrastructure" target="_blank" rel="noopener">QCon旧金山演讲总结：阿里无线技术架构演进</a></li>
<li><a href="http://blog.linzihong.com/2017/07/27/framework/" target="_blank" rel="noopener">斗米客户端的架构思想</a></li>
</ul>
<h4 id="组件化设计"><a href="#组件化设计" class="headerlink" title="组件化设计"></a>组件化设计</h4><ul>
<li><a href="http://limboy.me/tech/2016/03/10/mgj-components.html" target="_blank" rel="noopener">蘑菇街 App 的组件化之路</a></li>
<li><a href="http://limboy.me/tech/2016/03/14/mgj-components-continued.html" target="_blank" rel="noopener">蘑菇街 App 的组件化之路·续</a></li>
<li><a href="http://casatwy.com/iOS-Modulization.html" target="_blank" rel="noopener">iOS应用架构谈（五）：组件化方案</a></li>
<li><a href="http://blog.cnbang.net/tech/3080/" target="_blank" rel="noopener">iOS 组件化方案探索</a></li>
<li><a href="http://chuansong.me/n/320688951236" target="_blank" rel="noopener">糯米移动组件架构演进之路</a></li>
<li><a href="http://www.infoq.com/cn/articles/xiaojukeji-component-practice-and-optimization" target="_blank" rel="noopener">滴滴的组件化实践与优化</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODg4MDk0Ng==&amp;mid=2651112821&amp;idx=1&amp;sn=2987ba2c9d68e3982e795d9eeb15f82b&amp;chksm=844c6ca8b33be5be42e673ff2a9087628b0d9fab5e5a403d4bd346b134f4ffe110e423967c3e&amp;scene=0#rd" target="_blank" rel="noopener">豆瓣App的模块化实践</a></li>
<li><a href="http://www.infoq.com/cn/articles/ios-app-component-development-practice" target="_blank" rel="noopener">iOS App组件化开发实践</a></li>
<li><a href="http://mp.weixin.qq.com/s/PbOh-l0E4bD3HoKj0GzYWQ" target="_blank" rel="noopener">58 同城 iOS 客户端组件化演变历程</a></li>
<li><a href="https://yq.aliyun.com/articles/129" target="_blank" rel="noopener">手机淘宝客户端架构探索实践</a></li>
<li><a href="http://www.infoq.com/cn/articles/jd-ios-component-management?utm_source=articles_about_mobile&amp;utm_medium=link&amp;utm_campaign=mobile" target="_blank" rel="noopener">京东iOS客户端组件管理实践</a></li>
<li><a href="https://www.jianshu.com/p/76da56b3bd55" target="_blank" rel="noopener">iOS 组件化 —— 路由设计思路分析</a></li>
<li><a href="https://www.jianshu.com/p/67a6004f6930" target="_blank" rel="noopener">组件化架构漫谈</a></li>
</ul>
<h4 id="IM架构梳理"><a href="#IM架构梳理" class="headerlink" title="IM架构梳理"></a>IM架构梳理</h4><ul>
<li><a href="http://www.52im.net/forum.php?mod=collection&amp;op=all" target="_blank" rel="noopener">IM 开发者社区</a></li>
<li><a href="http://blog.csdn.net/skymingst/article/details/49448717" target="_blank" rel="noopener">IM架构梳理</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzAwNjQwNzU2NQ==&amp;mid=402441278&amp;idx=1&amp;sn=af82781e3e6b694d82ac8454dbe3ae67&amp;scene=0&amp;key=710a5d99946419d9ebeb6a76103f5b3c9a2a96d61dd040e7eaacca508005e842656a35d9b9664ec603be12ce0c3f25c7&amp;ascene=0&amp;uin=MjY1NTg0NzMyMQ%3D%3D&amp;devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.11.3+build(15D21" target="_blank" rel="noopener">58到家消息系统设计与开发实践</a>&amp;version=11020201&amp;pass_ticket=TlXzGHRFhCo4eytB1hbIW0fFZq50RM%2BdZKQ7eajgE1C8Lc0aRV7IIgbSt6S4h5eZ)</li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=205775353&amp;idx=1&amp;sn=ecc1f32ec9585f2c7672a27dfbc726ca&amp;scene=1&amp;srcid=0317WNL1c9K3dhx6rqsrhXL5&amp;key=710a5d99946419d970963f96a056ab527d7e0a5ec70e2094cbb32922797076e77c9282e8ead417792c53ca5798beac51&amp;ascene=0&amp;uin=MjY1NTg0NzMyMQ%3D%3D&amp;devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.11.3+build(15D21" target="_blank" rel="noopener">im协议设计选型（上）</a>&amp;version=11020201&amp;pass_ticket=TlXzGHRFhCo4eytB1hbIW0fFZq50RM%2BdZKQ7eajgE1C8Lc0aRV7IIgbSt6S4h5eZ)</li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=205034544&amp;idx=1&amp;sn=26bbbf4a49ae6b6c4b8c3cba7f79764f&amp;scene=1&amp;srcid=0317zhrXNGEHs2T4xAjbCoeO&amp;key=710a5d99946419d9f10782b19962c97c88912b052aadce02ef6e5d82a2b2814aa055d499a22072c468f7c1d3f085cc8a&amp;ascene=0&amp;uin=MjY1NTg0NzMyMQ%3D%3D&amp;devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.11.3+build(15D21" target="_blank" rel="noopener">webim如何保证消息的可靠投递</a>&amp;version=11020201&amp;pass_ticket=TlXzGHRFhCo4eytB1hbIW0fFZq50RM%2BdZKQ7eajgE1C8Lc0aRV7IIgbSt6S4h5eZ)</li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=205001346&amp;idx=1&amp;sn=fd87cc010bf4548589c9fabea80c4cad&amp;scene=1&amp;srcid=0317oohatukhxTbBwWHKP6cU&amp;key=710a5d99946419d9708e602d966c3a50e34f09ca848c5b3bf380b79bc6b34ad6e84062ed43a22333531a6525cc8fa07d&amp;ascene=0&amp;uin=MjY1NTg0NzMyMQ%3D%3D&amp;devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.11.3+build(15D21" target="_blank" rel="noopener">webim如何用轮询保证消息绝对实时</a>&amp;version=11020201&amp;pass_ticket=TlXzGHRFhCo4eytB1hbIW0fFZq50RM%2BdZKQ7eajgE1C8Lc0aRV7IIgbSt6S4h5eZ)</li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MjM5MzA0ODkyMA==&amp;mid=405991976&amp;idx=1&amp;sn=4bf8982f2dc2ea2df62c312e4fe508f4&amp;scene=0&amp;key=710a5d99946419d98e3fd2dc46318f0db3ec6994c949bcf1ed7aa9792993c67eb1388d95f0019d30c30a407b14211064&amp;ascene=0&amp;uin=MjY1NTg0NzMyMQ%3D%3D&amp;devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.11.3+build(15D21" target="_blank" rel="noopener">一套简洁的即时通信 (IM) 系统</a>&amp;version=11020201&amp;pass_ticket=TlXzGHRFhCo4eytB1hbIW0fFZq50RM%2BdZKQ7eajgE1C8Lc0aRV7IIgbSt6S4h5eZ)</li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&amp;mid=205117508&amp;idx=1&amp;sn=71eecf04581e68deee4a44f7786309f5&amp;scene=1&amp;srcid=0317jpSQhhxbYvM2Kz6vlhOK&amp;key=710a5d99946419d9c798c52d8b5dd4f67c1c4b144bb07217906e72260d353ac92559a0451d7548f74cc70ca9e0223637&amp;ascene=0&amp;uin=MjY1NTg0NzMyMQ%3D%3D&amp;devicetype=iMac+MacBookPro11%2C4+OSX+OSX+10.11.3+build(15D21" target="_blank" rel="noopener">微博与im消息实现对比[随想]</a>&amp;version=11020201&amp;pass_ticket=TlXzGHRFhCo4eytB1hbIW0fFZq50RM%2BdZKQ7eajgE1C8Lc0aRV7IIgbSt6S4h5eZ)</li>
</ul>
<h4 id="实战学习"><a href="#实战学习" class="headerlink" title="实战学习"></a>实战学习</h4><p>最后推荐些可以帮助理解实战的开源项目：</p>
<ul>
<li><a href="https://github.com/singro/v2ex" target="_blank" rel="noopener">V2EX - V2EX iOS客户端，已上线项目</a></li>
<li><a href="https://github.com/mozilla/firefox-ios" target="_blank" rel="noopener">Firox-IOS - Firox iOS客户端，用Swift写的</a></li>
<li><a href="https://github.com/peter-iakovlev/Telegram" target="_blank" rel="noopener">Telegram - 一个非常牛XXX的开源社交项目</a></li>
<li><a href="https://github.com/netease-im/NIM_iOS_Demo" target="_blank" rel="noopener">网易云信开源UI组件</a></li>
</ul>
<h4 id="其他资源："><a href="#其他资源：" class="headerlink" title="其他资源："></a>其他资源：</h4><ul>
<li><a href="http://objccn.io/issue-13/" target="_blank" rel="noopener">objccn - 架构 - 强烈推荐</a></li>
<li><a href="http://www.cocoachina.com/programmer/20150617/12170.html" target="_blank" rel="noopener">怎么面试架构师</a></li>
<li><a href="https://github.com/zhuchaowe/EasyIOS" target="_blank" rel="noopener">EasyIOS</a></li>
<li><a href="https://github.com/uxyheaven/NativeAppFrameworkDesign" target="_blank" rel="noopener">移动App架构设计</a></li>
<li><a href="https://realm.io/cn/news/slug-marcus-zarra-exploring-mvcn-swift/?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="noopener">探索 Swift 中的 MVC-N 模式</a></li>
<li><a href="https://github.com/lovemo/MVVMFramework" target="_blank" rel="noopener">MVVMFramework</a></li>
<li><a href="http://blog.jobbole.com/55505/" target="_blank" rel="noopener">iOS设计模式之观察者模式</a></li>
<li><a href="http://blog.jobbole.com/56439/" target="_blank" rel="noopener">iOS设计模式反思之单例模式的进化-非翻译</a></li>
<li><a href="http://blog.jobbole.com/20496/" target="_blank" rel="noopener">关于 23 种设计模式的有趣见解-非翻译</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/03/iOS综合文件总结/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yida">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="益达的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/03/iOS综合文件总结/" itemprop="url">iOS-Performance-Optimization</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-03T22:13:29+08:00">
                2018-12-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="iOS-Performance-Optimization"><a href="#iOS-Performance-Optimization" class="headerlink" title="iOS-Performance-Optimization"></a>iOS-Performance-Optimization</h1><p>关于iOS 性能优化梳理：<br>基本工具、业务优化、内存优化、卡顿优化、布局优化、电量优化、 安装包瘦身、启动优化、网络优化等</p>
<h4 id="iOS-官方文档"><a href="#iOS-官方文档" class="headerlink" title="iOS 官方文档"></a>iOS 官方文档</h4><blockquote>
<p>专题内容比较多，后面细分内容会有部分重复。</p>
<ul>
<li><a href="https://developer.apple.com/library/content/navigation/#section=Topics&amp;topic=Performance" target="_blank" rel="noopener">Performance 专题</a> </li>
<li><a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CoreAnimation_guide" target="_blank" rel="noopener">Core Animation Programming Guide</a> </li>
</ul>
</blockquote>
<h4 id="iOS-性能优化相关书籍"><a href="#iOS-性能优化相关书籍" class="headerlink" title="iOS 性能优化相关书籍"></a>iOS 性能优化相关书籍</h4><ul>
<li><a href="http://download.csdn.net/detail/tskyming/9831453" target="_blank" rel="noopener">Pro iOS Apps Performance Optimization</a></li>
<li><a href="http://download.csdn.net/detail/tskyming/9831465" target="_blank" rel="noopener">High Performance iOS Apps</a></li>
<li><a href="https://github.com/AttackOnDobby/iOS-Core-Animation-Advanced-Techniques" target="_blank" rel="noopener">iOS-Core-Animation-Advanced-Techniques</a></li>
</ul>
<h4 id="Instruments-工具相关"><a href="#Instruments-工具相关" class="headerlink" title="Instruments 工具相关"></a>Instruments 工具相关</h4><ul>
<li><a href="https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/index.html" target="_blank" rel="noopener">Instruments User Guide</a> <a href="http://cdn.cocimg.com/bbs/attachment/Fid_6/6_24457_90eabb4ed5b3863.pdf" target="_blank" rel="noopener">中文翻译-PDF</a> </li>
<li><a href="http://www.cnblogs.com/lxlx1798/p/6933485.html" target="_blank" rel="noopener">Instruments之Leaks学习</a> </li>
<li><a href="http://www.cnblogs.com/lxlx1798/p/6933195.html" target="_blank" rel="noopener">Instruments学习之Allocations</a> </li>
<li><a href="http://www.cnblogs.com/lxlx1798/p/6933604.html" target="_blank" rel="noopener">instrument之Time Profiler总结</a></li>
<li><a href="http://www.cnblogs.com/lxlx1798/p/6933364.html" target="_blank" rel="noopener">Instruments学习之Core Animation学习</a> </li>
<li><a href="http://www.cnblogs.com/lxlx1798/p/6933141.html" target="_blank" rel="noopener">Instruments之Activity Monitor使用入门</a> </li>
</ul>
<h4 id="GMTC-2018-PPT"><a href="#GMTC-2018-PPT" class="headerlink" title="GMTC-2018 PPT"></a>GMTC-2018 PPT</h4><ul>
<li><a href="https://ppt.geekbang.org/slide/show?cid=31&amp;pid=1495" target="_blank" rel="noopener">LinkedIn移动应用的性能优化之道</a></li>
<li><a href="https://ppt.geekbang.org/slide/show?cid=31&amp;pid=1500" target="_blank" rel="noopener">美团客户端监控与异常排查实践</a></li>
<li><a href="https://ppt.geekbang.org/slide/show?cid=31&amp;pid=1497" target="_blank" rel="noopener">爱奇艺APP极致体验之路</a></li>
<li><a href="https://ppt.geekbang.org/slide/show?cid=31&amp;pid=1496" target="_blank" rel="noopener">大前端时代前端监控的最佳实践</a></li>
</ul>
<h4 id="综合篇"><a href="#综合篇" class="headerlink" title="综合篇"></a>综合篇</h4><ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2012/235" target="_blank" rel="noopener">WWDC2012-235-iOS APP Performance:Responsiveness</a></li>
<li><a href="http://wereadteam.github.io/2016/05/03/WeRead-Performance/" target="_blank" rel="noopener">微信读书iOS性能优化</a></li>
<li><a href="http://wereadteam.github.io/2016/12/12/Monitor/" target="_blank" rel="noopener">微信读书 iOS 质量保证及性能监控</a></li>
<li><a href="https://ming1016.github.io/2017/06/20/deeply-ios-performance-optimization/" target="_blank" rel="noopener">深入剖析 iOS 性能优化</a></li>
<li><a href="http://blog.csdn.net/magicwindow/article/details/51423463" target="_blank" rel="noopener">魔窗研发副总裁沈哲：移动端SDK的优化之路</a></li>
<li><a href="http://www.cocoachina.com/design/20160905/17483.html" target="_blank" rel="noopener">搜狗输入法 iOS 版开发与优化实践</a><a href="https://github.com/MDCC2016/iOS-Session-Slides/blob/master/%E6%90%9C%E7%8B%97%E8%BE%93%E5%85%A5%E6%B3%95%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%AE%9E%E8%B7%B5-%E6%9D%8E%E8%85%BE%E6%9D%B0.pdf" target="_blank" rel="noopener">PPT</a></li>
<li><a href="http://www.infoq.com/cn/presentations/stability-and-performance-of-mogujie-app" target="_blank" rel="noopener">蘑菇街 App 的稳定性与性能实践</a><a href="https://sanwen8.cn/p/6e5c888.html" target="_blank" rel="noopener">PPT</a></li>
<li><a href="http://pstatic.geekbang.org/pdf/593a53d813cef.pdf?e=1497499485&amp;token=eHNJKRTldoRsUX0uCP9M3icEhpbyh3VF9Nrk5UPM:sa-xp_aIeIhtiWbqR-hY4ImMzFc=" target="_blank" rel="noopener">⼿淘iOS性能优化探索</a></li>
<li><a href="https://juejin.im/post/58ca0832a22b9d006418fe43" target="_blank" rel="noopener">iOS App 稳定性指标及监测</a></li>
</ul>
<h4 id="内存优化"><a href="#内存优化" class="headerlink" title="内存优化"></a>内存优化</h4><ul>
<li><a href="https://developer.apple.com/library/content/documentation/Performance/Conceptual/ManagingMemory/ManagingMemory.html#//apple_ref/doc/uid/10000160i" target="_blank" rel="noopener">Memory Usage Performance Guidelines</a> </li>
<li><a href="https://developer.apple.com/videos/play/wwdc2018/416/" target="_blank" rel="noopener">WWDC-2018-416</a><a href="https://juejin.im/post/5b23dafee51d4558e03cbf4f" target="_blank" rel="noopener">中文翻译</a></li>
<li><a href="https://juejin.im/post/5a5e13c45188257327399e19" target="_blank" rel="noopener">探索iOS内存分配</a> </li>
<li><a href="http://wetest.qq.com/lab/view/367.html?from=content_juejin" target="_blank" rel="noopener">iOS微信内存监控</a></li>
<li><a href="https://www.imooc.com/video/11075" target="_blank" rel="noopener">内存管理及优化(上)-QQ浏览器</a></li>
<li><a href="https://www.imooc.com/video/11076" target="_blank" rel="noopener">内存管理及优化(下)-QQ浏览器</a></li>
<li><a href="https://www.jianshu.com/p/4458700a8ba8" target="_blank" rel="noopener">OOM探究：XNU 内存状态管理</a></li>
</ul>
<h4 id="卡顿优化"><a href="#卡顿优化" class="headerlink" title="卡顿优化"></a>卡顿优化</h4><ul>
<li><a href="http://www.cocoachina.com/ios/20160208/15238.html?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="noopener">UIKit性能调优实战讲解</a></li>
<li><a href="http://wetest.qq.com/lab/view/354.html" target="_blank" rel="noopener">QQ空间掉帧率优化实战</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzA4MzEwOTkyMQ==&amp;mid=2667379069&amp;idx=1&amp;sn=376d9ef2261cf13e930406f1c35d3569" target="_blank" rel="noopener">实现 60fps 的网易云音乐首页</a> </li>
<li><a href="http://blog.ibireme.com/2015/11/12/smooth_user_interfaces_for_ios/" target="_blank" rel="noopener">iOS 保持界面流畅的技巧</a></li>
<li><a href="http://www.cocoachina.com/ios/20180412/22990.html" target="_blank" rel="noopener">iOS UI性能优化总结</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ%3D%3D&amp;idx=1&amp;mid=207890859&amp;scene=23&amp;sn=e98dd604cdb854e7a5808d2072c29162&amp;srcid=0921FzoCw9j1W7n4uFYKuarC#rd" target="_blank" rel="noopener">微信iOS卡顿监控系统</a></li>
<li><a href="http://www.cnblogs.com/gatsbywang/p/5555200.html" target="_blank" rel="noopener">iOS-卡顿检测</a></li>
<li><a href="http://ios.jobbole.com/93085/" target="_blank" rel="noopener">iOS监控：卡顿检测</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzI5MjEzNzA1MA==&amp;mid=2650264136&amp;idx=1&amp;sn=052c1db8131d4bed8458b98e1ec0d5b0&amp;chksm=f406837dc3710a6b49e76ce3639f671373b553e8a91b544e82bb8747e9adc7985fea1093a394#rd" target="_blank" rel="noopener">iOS应用UI线程卡顿监控</a></li>
</ul>
<h4 id="布局优化"><a href="#布局优化" class="headerlink" title="布局优化"></a>布局优化</h4><p>TODO：</p>
<h4 id="电量优化"><a href="#电量优化" class="headerlink" title="电量优化"></a>电量优化</h4><ul>
<li><a href="https://developer.apple.com/library/content/documentation/Performance/Conceptual/EnergyGuide-iOS/index.html#//apple_ref/doc/uid/TP40015243" target="_blank" rel="noopener">Guide - Energy Efficiency Guide for iOS Apps</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2017/238/" target="_blank" rel="noopener">WWDC2017 - Writing Energy Efficient Apps</a></li>
<li><a href="https://github.com/ChenYilong/iOSBlog/issues/10" target="_blank" rel="noopener">iOS 常见耗电量检测方案调研</a></li>
<li><a href="http://www.jianshu.com/p/f0dc653d04ca" target="_blank" rel="noopener">教你开发省电的 iOS app（WWDC17 观后）</a></li>
<li><a href="https://juejin.im/post/5a0c5af051882578da0d6925" target="_blank" rel="noopener">浅析移动蜂窝网络的特点及其省电方案</a></li>
<li><a href="https://mp.weixin.qq.com/s/q39BHIWsbdNeqfH85EOkIQ" target="_blank" rel="noopener">iOS电量测试实践</a></li>
<li><a href="http://www.cocoachina.com/ios/20171204/21413.html" target="_blank" rel="noopener">iOS进阶–App功耗优化看这篇就够了</a></li>
</ul>
<h4 id="启动优化"><a href="#启动优化" class="headerlink" title="启动优化"></a>启动优化</h4><ul>
<li><a href="https://developer.apple.com/videos/play/wwdc2016/406" target="_blank" rel="noopener">WWDC2016-406-Optimizing App Startup Time</a></li>
<li><a href="https://developer.apple.com/videos/play/wwdc2017/413" target="_blank" rel="noopener">WWDC2017-413-App Startup Time:Past,Present,and Future</a></li>
<li><a href="https://www.jianshu.com/p/c14987eee107" target="_blank" rel="noopener">如何精准度量iOSAPP启动时间</a></li>
<li><a href="http://yulingtianxia.com/blog/2016/10/30/Optimizing-App-Startup-Time" target="_blank" rel="noopener">优化 App 的启动时间-杨萧玉</a></li>
<li><a href="https://techblog.toutiao.com/2017/01/17/iosspeed/#more" target="_blank" rel="noopener">iOS客户端启动速度优化-今日头条</a></li>
<li><a href="https://mp.weixin.qq.com/s/Kf3EbDIUuf0aWVT-UCEmbA" target="_blank" rel="noopener">iOS App 启动性能优化-WiFi管家</a></li>
<li><a href="http://www.cocoachina.com/ios/20160104/14870.html" target="_blank" rel="noopener">iOS App如何优化启动时间-Facebook</a></li>
<li><a href="http://www.infoq.com/cn/presentations/ios-typewriting-start-speed-optimization" target="_blank" rel="noopener">iOS 启动速度优化-百度输入法</a></li>
<li><a href="https://juejin.im/post/5a31190751882559e225a775" target="_blank" rel="noopener">一次立竿见影的启动时间优化</a></li>
<li><a href="https://objccn.io/issue-6-3/" target="_blank" rel="noopener">obj中国-Mach-O 可执行文件</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/38183046?from=1086193010&amp;wm=3333_2001&amp;weiboauthoruid=1690182120" target="_blank" rel="noopener">iOS app启动速度研究实践</a></li>
</ul>
<h4 id="体积优化"><a href="#体积优化" class="headerlink" title="体积优化"></a>体积优化</h4><ul>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ==&amp;mid=207986417&amp;idx=1&amp;sn=77ea7d8e4f8ab7b59111e78c86ccfe66&amp;scene=24&amp;srcid=0921TTAXHGHWKqckEHTvGzoA#rd" target="_blank" rel="noopener">iOS微信安装包瘦身</a></li>
<li><a href="https://techblog.toutiao.com/2016/12/27/iphone/" target="_blank" rel="noopener">今日头条IPA安装包的优化</a></li>
<li><a href="http://www.infoq.com/cn/articles/ios-thinning-delete-unnecessary-mach-o" target="_blank" rel="noopener">iOS瘦身之删除FrameWork中无用mach-O文件</a></li>
<li><a href="http://www.infoq.com/cn/articles/clang-plugin-ios-app-size-reducing" target="_blank" rel="noopener">基于clang插件的一种iOS包大小瘦身方案</a></li>
<li><a href="http://blog.cnbang.net/tech/2544/" target="_blank" rel="noopener">iOS可执行文件瘦身方法</a></li>
<li><a href="http://crespoxiao.github.io/2016/11/12/iOS%E5%9B%BE%E7%89%87%E4%BC%98%E5%8C%96%E6%96%B9%E6%A1%88/" target="_blank" rel="noopener">iOS图片优化方案</a></li>
<li><a href="https://ming1016.github.io/2017/06/12/gmtc-ios-slimming-practice/" target="_blank" rel="noopener">滴滴出行 iOS 端瘦身实践的 Slides</a></li>
</ul>
<h4 id="网络优化"><a href="#网络优化" class="headerlink" title="网络优化"></a>网络优化</h4><ul>
<li><a href="http://tech.meituan.com/SharkSDK.html" target="_blank" rel="noopener">美团点评移动网络优化实践</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzAwMDU1MTE1OQ==&amp;mid=209805123&amp;idx=1&amp;sn=ced8d67c3e2cc3ca38ef722949fa21f8" target="_blank" rel="noopener">开源版HttpDNS方案详解</a></li>
<li><a href="http://www.infoq.com/cn/articles/how-ctrip-improves-app-networking-performance" target="_blank" rel="noopener">携程App的网络性能优化实践</a></li>
<li><a href="http://www.infoq.com/cn/articles/app-network-service-and-performance-optimization-of-ctrip" target="_blank" rel="noopener">2016年携程App网络服务通道治理和性能优化实践</a></li>
<li><a href="http://www.infoq.com/cn/articles/mogujie-app-chromium-network-layer" target="_blank" rel="noopener">蘑菇街App Chromium网络栈实践</a></li>
<li><a href="http://www.infoq.com/cn/presentations/mogujie-high-concurrent-multi-terminal-wireless-gateway-practice" target="_blank" rel="noopener">蘑菇街高并发多终端无线网关实践</a></li>
<li><a href="http://blog.cnbang.net/tech/3531/?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io" target="_blank" rel="noopener">移动 APP 网络优化概述</a></li>
</ul>
<h4 id="编译优化"><a href="#编译优化" class="headerlink" title="编译优化"></a>编译优化</h4><ul>
<li><a href="https://github.com/fastred/Optimizing-Swift-Build-Times" target="_blank" rel="noopener">Optimizing-Swift-Build-Times</a></li>
</ul>
<h4 id="APM"><a href="#APM" class="headerlink" title="APM"></a>APM</h4><ul>
<li><a href="http://ios.jobbole.com/92988/" target="_blank" rel="noopener">移动端监控体系之技术原理剖析</a></li>
<li><a href="http://mp.weixin.qq.com/s?__biz=MzA3ODg4MDk0Ng==&amp;mid=2651112215&amp;idx=1&amp;sn=9cc5b5fa630542a6d4b7a5626e35217a#rd" target="_blank" rel="noopener">网易 - NeteaseAPM iOS SDK技术实现分享</a></li>
<li><a href="http://www.jianshu.com/p/69ce01e15042" target="_blank" rel="noopener">网易乐得 - iOS无埋点数据SDK实践之路</a> </li>
<li><a href="http://www.infoq.com/cn/presentations/mobile-terminal-apm-product-development-skills" target="_blank" rel="noopener">听云 - 移动端 APM 产品研发技能</a> </li>
<li><a href="http://www.infoq.com/cn/presentations/mobile-app-performance-monitoring-practice?utm_source=presentations_about_mobile&amp;utm_medium=link&amp;utm_campaign=mobile" target="_blank" rel="noopener">听云 - 移动 App 性能监测</a></li>
<li><a href="https://github.com/aozhimin/iOS-Monitor-Platform" target="_blank" rel="noopener">iOS 性能监控 SDK —— Wedjat（华狄特）开发过程的调研和整理</a></li>
<li><a href="https://github.com/iOS-APM/iOS-APM-Secrets" target="_blank" rel="noopener">揭秘 APM iOS SDK 的核心技术</a>  </li>
<li><a href="https://github.com/aozhimin/iOS-Monitor-Resources" target="_blank" rel="noopener">iOS-Monitor-Resources</a> </li>
<li><a href="https://juejin.im/post/5b1602906fb9a01e3542f08c" target="_blank" rel="noopener">iOS 流量监控分析</a></li>
<li><a href="http://ddrccw.github.io/2017/12/30/reverse-xcode-with-lldb-and-hopper-disassembler" target="_blank" rel="noopener">小试Xcode逆向：app内存监控原理初探</a></li>
<li><a href="http://apmcon.cn/2016/index.html#yjsl" target="_blank" rel="noopener">APMCon-2016演讲实录</a>  <h4 id="调试-amp-Crash"><a href="#调试-amp-Crash" class="headerlink" title="调试 &amp; Crash"></a>调试 &amp; Crash</h4></li>
<li><a href="https://github.com/aozhimin/iOS-Debug-Hacks" target="_blank" rel="noopener">iOS 项目开发过程中用到的高级调试技巧，涉及三方库动态调试、静态分析和反编译等领域</a></li>
<li><a href="https://developer.apple.com/library/content/technotes/tn2151/_index.html" target="_blank" rel="noopener">Understanding and Analyzing Application Crash Reports</a> </li>
</ul>
<h4 id="相关开源库"><a href="#相关开源库" class="headerlink" title="相关开源库"></a>相关开源库</h4><h5 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h5><ul>
<li><a href="https://github.com/CNSRE/HTTPDNSLib-for-iOS" target="_blank" rel="noopener">HTTPDNSLib-for-iOS</a></li>
<li><a href="https://github.com/CNSRE/HTTPDNSLib" target="_blank" rel="noopener">HTTPDNSLib-for-Andorod</a></li>
<li><a href="https://github.com/coderyi/NetworkEye/blob/master/README_Chinese.md" target="_blank" rel="noopener">NetworkEye</a> </li>
</ul>
<h5 id="卡顿"><a href="#卡顿" class="headerlink" title="卡顿"></a>卡顿</h5><ul>
<li><a href="https://github.com/suifengqjn/PerformanceMonitor" target="_blank" rel="noopener">PerformanceMonitor-Runloop</a></li>
<li><a href="https://github.com/featuretower/GYMonitor" target="_blank" rel="noopener">GYMonitor-FPS</a></li>
</ul>
<h5 id="瘦身"><a href="#瘦身" class="headerlink" title="瘦身"></a>瘦身</h5><ul>
<li><a href="https://github.com/tinymind/LSUnusedResources" target="_blank" rel="noopener">LSUnusedResources</a></li>
<li><a href="https://github.com/huanxsd/LinkMap" target="_blank" rel="noopener">LinkMap</a></li>
</ul>
<h4 id="APM-1"><a href="#APM-1" class="headerlink" title="APM"></a>APM</h4><ul>
<li><a href="https://github.com/iOS-APM/iOS-System-Services" target="_blank" rel="noopener">iOS-System-Services</a></li>
<li><a href="https://github.com/iOS-APM/SystemMonitor" target="_blank" rel="noopener">System Monitor</a></li>
<li><a href="https://github.com/Split82/iOSMemoryBudgetTest" target="_blank" rel="noopener">iOS Memory Budget Test</a></li>
<li><a href="https://github.com/ArmsZhou/PerformanceTestingHelper" target="_blank" rel="noopener">PerformanceTestingHelper</a></li>
<li><a href="https://github.com/Tencent/GT" target="_blank" rel="noopener">GT</a> </li>
<li><a href="https://github.com/zixun/GodEye" target="_blank" rel="noopener">GodEye</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/18/位运算/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yida">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="益达的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/18/位运算/" itemprop="url">关于位运算</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-18T22:13:29+08:00">
                2018-11-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>什么是位运算</p>
<p>程序中的所有数在计算机内存中都是以二进制形式存储的。位运算说穿了，就是直接对整数在内存中的二进制位运算。比如，and运算本来是一个逻辑运算符，但整数与整数之间可以进行and运算。举个例子，6的二进制110，11的二进制是1011，那么6 and 11的结果2， 它是二进制对应位进行逻辑运算的结果(0标识false，1标识true，空位都是当0处理)</p>
<p>由于位运算直接对内存数据进行操作，不需要转成十进制，因此处理速度非常快。</p>
<p>异或运算有结合律</p>
<p>常用的位运算操作：</p>
<p>X&amp; 1 == 1 或者  == 0 来判断 奇数偶数；（如果使用%的话，需要在寄存器里面做一次除法，然后得到他的余数）<br>X = X &amp;（X - 1） 得出清零最低位的1<br>X &amp; -X 得出最低位的1</p>
<p>统计策略中的1的数量都多少个，先统计，</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/18/面试准备/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yida">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="益达的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/18/面试准备/" itemprop="url">面试注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-18T22:13:29+08:00">
                2018-11-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="心理准备"><a href="#心理准备" class="headerlink" title="心理准备"></a>心理准备</h1><h3 id="明确动机"><a href="#明确动机" class="headerlink" title="明确动机"></a>明确动机</h3><p>比如为什么要跳槽或你想从事什么内容? 马爸爸曾提及过三要素(钱、心、事), 你是否完全认同? 或是有其他的原因?<br>不鼓励轻易跳槽, 跳槽未必有利于你长期的发展, 还有就是像某东在就职经历这块卡的很严</p>
<h3 id="优势是啥"><a href="#优势是啥" class="headerlink" title="优势是啥"></a>优势是啥</h3><p>面对其他候选人, 是否清楚自己的优势？比如你某方面技术突出、抗压能力更好、沟通能力更好等.</p>
<h3 id="最坏打算"><a href="#最坏打算" class="headerlink" title="最坏打算"></a>最坏打算</h3><p>若决定离开, 那么便坚决离开, 没有回头路. 决定前做好最坏打算, 比如连续面试下来结果都不好, 是否能承受, 有无备选方案?</p>
<h3 id="学会健忘"><a href="#学会健忘" class="headerlink" title="学会健忘"></a>学会健忘</h3><p>可能某几次面试结果不尽人意, 或是因为准备不足, 或是因为”气场不和”等等. 总之摆正心态, 忘记之前的面试结果, 对面试不足之处有针对性的去总结和提高, 然后接着面就好</p>
<p>尤其对于”放长线作战”的同学, 个人推荐花时间搞清楚以上4点</p>
<h1 id="物资准备"><a href="#物资准备" class="headerlink" title="物资准备"></a>物资准备</h1><p>“物资”直接决定面试的成败. 主要分为硬实力与软实力的体现</p>
<h3 id="硬实力"><a href="#硬实力" class="headerlink" title="硬实力"></a>硬实力</h3><h4 id="通用技能"><a href="#通用技能" class="headerlink" title="通用技能"></a>通用技能</h4><ul>
<li>数据结构, 算法(Sort、字符串、数组、位操作、回溯、双指针、DFS、BFS、DP、分治、二分查找..)</li>
<li>设计模式(创建型、结构型、行为型设计模式)</li>
<li>计算机网络(应用层/传输层协议、网络分层..)</li>
<li>操作系统(进程、线程、内存布局..)</li>
<li>编译原理(编译过程..)</li>
</ul>
<h4 id="iOS技能"><a href="#iOS技能" class="headerlink" title="iOS技能"></a>iOS技能</h4><ul>
<li>修饰符, 可变不可变对象等基础</li>
<li>Runtime</li>
<li>RunLoop</li>
<li>KVC、KVO原理</li>
<li>block本质</li>
<li>category本质</li>
<li>内存管理</li>
<li>事件传递</li>
<li>App、VC、View、CALayer生命周期</li>
<li>多线程(队列、锁)</li>
<li>性能优化(体验优化、启动优化、网络优化、编译优化)</li>
<li>主流组件化、模块化、架构方案</li>
<li>Core Animation、屏幕渲染等</li>
<li>数据持久化方案</li>
<li>动态化方案(Hybird/RN/Weex/Flutter)</li>
</ul>
<h4 id="项目经历"><a href="#项目经历" class="headerlink" title="项目经历"></a>项目经历</h4><ul>
<li>简历上写的</li>
<li>主流三方库</li>
</ul>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ul>
<li>算法大厂必考项目, 不过多描述, 推荐leetcode分类型进行算法思路的训练, 一般可以秒杀medium的题目足矣, 仅一次问到hard难度的题目</li>
<li>iOS知识点考察, 仅知道是什么还不够, 更多的是为什么. 平时注意积累, 比如看源码, 博客文章(内容未必都对, 带着辩证思维去看)等. 另外印象笔记剪藏功能用于收藏回顾真的相当不错.</li>
<li>面试官往往会由浅入深进行考察, 若不会就明确表示出来(吃过强答的亏, 印象分那是卡卡卡的掉.) 一定要多与面试官沟通, 倾听面试官把问题描述完, 若只是忘了细节争取能说下思路也好</li>
</ul>
<h1 id="职业发展"><a href="#职业发展" class="headerlink" title="职业发展"></a>职业发展</h1><p>这方面结合各位大佬赠与的宝贵建议简单概括一下</p>
<h3 id="围绕核心"><a href="#围绕核心" class="headerlink" title="围绕核心"></a>围绕核心</h3><p>对于走技术路线的同学来说, 毫无疑问就是不断提升技术方面的深度以及广度</p>
<h3 id="提高软实力"><a href="#提高软实力" class="headerlink" title="提高软实力"></a>提高软实力</h3><p>专业以外的能力, 具体前边也有提及, 比如学习方式的改进, 沟通能力的提高, 变得更靠谱等</p>
<h3 id="承担更多"><a href="#承担更多" class="headerlink" title="承担更多"></a>承担更多</h3><p>不单单专注于完成分类之事或提高个人, 可以尝试放大格局, 主动去承担本分以外的职责, 比如思考并实践对整个团队或者整个公司层面有益的事</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/01/20180901数据存储问题/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yida">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="益达的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/01/20180901数据存储问题/" itemprop="url">图片 存储设计</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-01T10:11:12+08:00">
                2018-09-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>为了设计一个比较好的磁盘缓存，我调查了大量的开源库，包括 TMDiskCache、PINDiskCache、SDWebImage、FastImageCache 等，也调查了一些闭源的实现，包括 NSURLCache、Facebook 的 FBDiskCache 等。他们的实现技术大致分为三类：基于文件读写、基于 mmap 文件内存映射、基于数据库。</p>
<p>TMDiskCache, PINDiskCache, SDWebImage 等缓存，都是基于文件系统的，即一个 Value 对应一个文件，通过文件读写来缓存数据。他们的实现都比较简单，性能也都相近，缺点也是同样的：不方便扩展、没有元数据、难以实现较好的淘汰算法、数据统计缓慢。</p>
<p>FastImageCache 采用的是 mmap 将文件映射到内存。用过 MongoDB 的人应该很熟悉 mmap 的缺陷：热数据的文件不要超过物理内存大小，不然 mmap 会导致内存交换严重降低性能；另外内存中的数据是定时 flush 到文件的，如果数据还未同步时程序挂掉，就会导致数据错误。抛开这些缺陷来说，mmap 性能非常高。</p>
<p>NSURLCache、FBDiskCache 都是基于 SQLite 数据库的。基于数据库的缓存可以很好的支持元数据、扩展方便、数据统计速度快，也很容易实现 LRU 或其他淘汰算法，唯一不确定的就是数据库读写的性能，为此我评测了一下 SQLite 在真机上的表现。iPhone 6 64G 下，SQLite 写入性能比直接写文件要高，但读取性能取决于数据大小：当单条数据小于 20K 时，数据越小 SQLite 读取性能越高；单条数据大于 20K 时，直接写为文件速度会更快一些。这和 SQLite 官网的描述基本一致。另外，直接从官网下载最新的 SQLite 源码编译，会比 iOS 系统自带的 sqlite3.dylib 性能要高很多。基于 SQLite 的这种表现，磁盘缓存最好是把 SQLite 和文件存储结合起来：key-value 元数据保存在 SQLite 中，而 value 数据则根据大小不同选择 SQLite 或文件存储。NSURLCache 选定的数据大小的阈值是 16K；FBDiskCache 则把所有 value 数据都保存成了文件。</p>
<p>我的 YYDiskCache 也是采用的 SQLite 配合文件的存储方式，在 iPhone 6 64G 上的性能基准测试结果见下图。在存取小数据 (NSNumber) 时，YYDiskCache 的性能远远高出基于文件存储的库；而较大数据的存取性能则比较接近了。但得益于 SQLite 存储的元数据，YYDiskCache 实现了 LRU 淘汰算法、更快的数据统计，更多的容量控制选项。</p>
<p>TM的研究背景资源。</p>
<p>TMCache做了一个线程安全的存储方式，区分两种缓存方式，一种Memory的存储方式，一种是Disk的存储方式。</p>
<p>存储过程中出现的:</p>
<p>PINCache的设计思路：</p>
<p>关于AF中的图片存储：</p>
<p>AF中提供了类AFImageDownloadReceipt来监控图片的下载情况，一个是sessionDataTask的，一个唯一区别receptionID来区分，</p>
<p>下载过程中:<br>在一个同步队列中同步执行下载操作，先判断这个task是不是存在mergeTask中，如果存在，直接把handler加到对应的task中，等数据下载完成，回调所有的handler执行对应的回调代码，然后显示图片….然后根据网络请求的缓存策略来判断，这个图片有没有被缓存，如果缓存了，直接使用缓存过的代码，如果没有缓存，继续到下载逻辑。</p>
<p>现在是一个SessionDataTask，用于请求的下载，然后返回数据针对responseQueue进行回调给之前的block中，如果发现task是mergeTask，返回的同时，需要先清除mergeTask任务，然后回调到指定的回调函数中，然后同步去掉当前统计的任务数量，如果发现当前任务还有未完成的任务，直接找到，遍历task中的所有任务，一旦是遇到挂起的任务 就开始对任务进行resume。</p>
<table>
<thead>
<tr>
<th>内存</th>
<th>消费的时间</th>
<th>性能消耗</th>
</tr>
</thead>
<tbody>
<tr>
<td>AF的图片下载策略</td>
<td>23s</td>
<td>233</td>
</tr>
</tbody>
</table>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/04/20180804关于Vue生成新的VirtualDOM/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yida">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="益达的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/04/20180804关于Vue生成新的VirtualDOM/" itemprop="url">Virtual dom知识点</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-04T10:11:12+08:00">
                2018-08-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>关于VUE切换成virtual dom的树的流程</p>
<p>简单举例子：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const demo = new Vue(&#123;</span><br><span class="line">	data: &#123;</span><br><span class="line">    	text:"before",</span><br><span class="line">    &#125;</span><br><span class="line">    render(h) &#123;</span><br><span class="line">    	return h('div',&#123;&#125;,[</span><br><span class="line">        	h('span',&#123;&#125;,[this.__toString__(this.text)])</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">setTimeout(function()&#123;</span><br><span class="line">	demo.text = "afer"</span><br><span class="line">&#125;,3000)</span><br></pre></td></tr></table></figure></p>
<p>对应的虚拟dom的变化;;before-&gt;after的变化<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>before<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>after<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>监听data下的所有属性的变化,data的属性变化，如何触发对应的函数；；<br>ES5提供了新的方法，Object.defineProperty。根据这个方法，可以自定getter和setter函数，那么在获取对象属性后设置对象属性就能直接执行响应的回调函数；；</p>
<p>语法Object.defineProperty方法会直接定义在一个新的属性上，或者修改一个对象的现有属性，并返回这个对象。<br>Object.defineProperty(obj,prop,description);<br>obj定义对象的属性；；prop 定义或者修改的属性  description 被定义和描述</p>
<p>底层Vue类的定义：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class Vue &#123;</span><br><span class="line">  constructor(options) &#123;</span><br><span class="line">    this.$options = options</span><br><span class="line">    this._data = options.data</span><br><span class="line">    observer(options.data, this._update.bind(this))</span><br><span class="line">    this._update()</span><br><span class="line">  &#125;</span><br><span class="line">  _update()&#123;</span><br><span class="line">    this.$options.render()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function observer(obj, cb) &#123;</span><br><span class="line">  Object.keys(obj).forEach((key) =&gt; &#123;</span><br><span class="line">    defineReactive(obj, key, obj[key], cb)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">改造后的方案：</span><br><span class="line">function observer(obj, cb) &#123;</span><br><span class="line">  Object.keys(obj).forEach((key) =&gt; &#123;</span><br><span class="line">  	if(typeof obj[key] === 'object') &#123;</span><br><span class="line">    	new obser</span><br><span class="line">    &#125;</span><br><span class="line">    defineReactive(obj, key, obj[key], cb)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">function defineReactive(obj, key, val, cb) &#123;</span><br><span class="line">  Object.defineProperty(obj, key, &#123;</span><br><span class="line">    enumerable: true,</span><br><span class="line">    configurable: true,</span><br><span class="line">    get: () =&gt; &#123;</span><br><span class="line">      console.log('你访问了' + key)</span><br><span class="line">      return val</span><br><span class="line">    &#125;,</span><br><span class="line">    set: newVal =&gt; &#123;</span><br><span class="line">      if (newVal === val)</span><br><span class="line">        return</span><br><span class="line">      console.log('你设置了' + key)</span><br><span class="line">      console.log('新的' + key + ' = ' + newVal)</span><br><span class="line">      val = newVal</span><br><span class="line">      cb()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var demo1 = new Vue(&#123;</span><br><span class="line">  el: '#demo',</span><br><span class="line">  data: &#123;</span><br><span class="line">    text: "before"</span><br><span class="line">  &#125;,</span><br><span class="line">  render()&#123;</span><br><span class="line">    console.log("我要render了")</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">var demo2 = new Vue(&#123;</span><br><span class="line">	el:'#demo2',</span><br><span class="line">    data: &#123;</span><br><span class="line">    	text: 'before',</span><br><span class="line">        o: &#123;</span><br><span class="line">        	text:'o-before'</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    render() &#123;</span><br><span class="line">    	console.log('我要render')</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>添加代理<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">_proxy(key) &#123;</span><br><span class="line">  const self = this</span><br><span class="line">  Object.defineProperty(self, key, &#123;</span><br><span class="line">    configurable: true,</span><br><span class="line">    enumerable: true,</span><br><span class="line">    get: function proxyGetter() &#123;</span><br><span class="line">      return self._data[key]</span><br><span class="line">    &#125;,</span><br><span class="line">    set: function proxySetter(val) &#123;</span><br><span class="line">      self._data[key] = val</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">在构造函数中添加如下代码</span><br><span class="line"></span><br><span class="line">Object.keys(options.data).forEach(key =&gt; this._proxy(key))</span><br></pre></td></tr></table></figure></p>
<h4 id="转换响应式工作完工"><a href="#转换响应式工作完工" class="headerlink" title="转换响应式工作完工"></a>转换响应式工作完工</h4><ol>
<li>只要 data 的属性发生变化，就会触发 render 函数</li>
<li>这也是为什么只有 data 中的属性是响应式的，而其他地方声明的值不是的原因</li>
</ol>
<p>但是这里有个问题 ？即触发 render 函数的准确度问题？</p>
<h3 id="第二步-解决准确度问题，引出虚拟dom"><a href="#第二步-解决准确度问题，引出虚拟dom" class="headerlink" title="第二步,解决准确度问题，引出虚拟dom"></a>第二步,解决准确度问题，引出虚拟dom</h3><p>思考下边的 demo<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">new Vue(&#123;</span><br><span class="line">  template: `</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>name:<span class="tag">&lt;/<span class="name">span</span>&gt;</span> &#123; &#123;name&#125; &#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>`,</span><br><span class="line">  data: &#123;</span><br><span class="line">    name: 'js',</span><br><span class="line">    age: 24</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">setTimeout(function()&#123;</span><br><span class="line">  demo.age = 25</span><br><span class="line">&#125;, 3000)</span><br></pre></td></tr></table></figure></p>
<h3 id="引入虚拟demo"><a href="#引入虚拟demo" class="headerlink" title="引入虚拟demo"></a>引入虚拟demo</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">vue的两种写法</span><br><span class="line">// template模板写法（最常用的）</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    text: "before",</span><br><span class="line">  &#125;,</span><br><span class="line">  template: `</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>text:<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span>`</span><br><span class="line">&#125;)</span><br><span class="line">// render函数写法，类似react的jsx写法</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    text: "before",</span><br><span class="line">  &#125;,</span><br><span class="line">  render (h) &#123;</span><br><span class="line">    return (</span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>text:<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">转化成下面的格式</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    text: "before",</span><br><span class="line">  &#125;,</span><br><span class="line">  render()&#123;</span><br><span class="line">    return this.__h__('div', &#123;&#125;, [</span><br><span class="line">      this.__h__('span', &#123;&#125;, [this.__toString__(this.text)])</span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">虚拟dom的生成</span><br><span class="line">new Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    text: "before",</span><br><span class="line">  &#125;,</span><br><span class="line">  render()&#123;</span><br><span class="line">    return this.__h__('div', &#123;&#125;, [</span><br><span class="line">      this.__h__('span', &#123;&#125;, [this.__toString__(this.text)])</span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">function VNode(tag, data, children, text) &#123;</span><br><span class="line">  return &#123;</span><br><span class="line">    tag: tag,</span><br><span class="line">    data: data,</span><br><span class="line">    children: children,</span><br><span class="line">    text: text</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Vue &#123;</span><br><span class="line">  constructor(options) &#123;</span><br><span class="line">    this.$options = options</span><br><span class="line">    const vdom = this._update()</span><br><span class="line">    console.log(vdom)</span><br><span class="line">  &#125;</span><br><span class="line">  _update() &#123;</span><br><span class="line">    return this._render.call(this)</span><br><span class="line">  &#125;</span><br><span class="line">  _render() &#123;</span><br><span class="line">    const vnode = this.$options.render.call(this)</span><br><span class="line">    return vnode</span><br><span class="line">  &#125;</span><br><span class="line">  __h__(tag, attr, children) &#123;</span><br><span class="line">    return VNode(tag, attr, children.map((child)=&gt;&#123;</span><br><span class="line">      if(typeof child === 'string')&#123;</span><br><span class="line">        return VNode(undefined, undefined, undefined, child)</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        return child</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;))</span><br><span class="line">  &#125;</span><br><span class="line">  __toString__(val) &#123;</span><br><span class="line">    return val == null ? '' : typeof val === 'object' ? JSON.stringify(val, null, 2) : String(val);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>回头看问题<br>我们需要知道 render 函数中依赖了 data 中的哪些属性，只有这些属性变化，才需要去触发 render 函数</p>
<h3 id="第三步，依赖收集，准确渲染"><a href="#第三步，依赖收集，准确渲染" class="headerlink" title="第三步，依赖收集，准确渲染"></a>第三步，依赖收集，准确渲染</h3><p>思路： 在这之前，我们已经把 data 中的属性改成响应式了，当去获取或者修改这些变量时便能够触发相应函数。那这里就可以利用这个相应的函数做些手脚了。<br>当声明一个 vue 对象时，在执行 render 函数获取虚拟dom的这个过程中，已经对 render 中依赖的 data 属性进行了一次获取操作，这次获取操作便可以拿到所有依赖。<br>其实不仅是 render，任何一个变量的改别，是因为别的变量改变引起(观察者模式)，都可以用上述方法，也就是 computed 和 watch 的原理</p>
<p>依赖收集<br>首先需要写一个依赖收集的类，每一个data中的属性都有可能被依赖，因此每个属性在响应式转化(defineReactive)的时候，就初始化它。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">class Dep &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    this.subs = []</span><br><span class="line">  &#125;</span><br><span class="line">  add(cb) &#123;</span><br><span class="line">    this.subs.push(cb)</span><br><span class="line">  &#125;</span><br><span class="line">  notify() &#123;</span><br><span class="line">    console.log(this.subs)</span><br><span class="line">    this.subs.forEach((cb) =&gt; cb())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function defineReactive(obj, key, val, cb) &#123;</span><br><span class="line">  const dep = new Dep()</span><br><span class="line">  Object.defineProperty(obj, key, &#123;</span><br><span class="line">    // 省略</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">class Dep &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    this.subs = []</span><br><span class="line">  &#125;</span><br><span class="line">  add(cb) &#123;</span><br><span class="line">    this.subs.push(cb)</span><br><span class="line">  &#125;</span><br><span class="line">  notify() &#123;</span><br><span class="line">    console.log(this.subs)</span><br><span class="line">    this.subs.forEach((cb) =&gt; cb())</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p>
<p>执行过程<br>当执行render函数的时候，依赖到的变量的get就会被执行，然后就把这个 render函数加到subs里面去。<br>当set的时候,就执行notify，将所有的subs数组里的函数执行，其中就包含render的执行。<br>代码中有一个Dep.target值，这个值时用来区分是普通的get还是收集依赖时的get<br>完整代码： <a href="https://github.com/SirM2z/assets/blob/master/vue-demo.js" target="_blank" rel="noopener">https://github.com/SirM2z/assets/blob/master/vue-demo.js</a></p>
<p>vue react响应式简单对比<br>综上发现： 用Object.defineProperty这个特性可以精确的写出订阅发布模式，从这点来说，vue是优于react的，在没经过优化之前，vue的渲染机制一定是比react更加准确的，为了验证这一说法，我用两个框架同时写了两个相同的简单项目进行对比。</p>
<p>没有对比就没有伤害<br>react项目地址：<a href="http://sirm2z.github.io/react-vue-test/react/index.html" target="_blank" rel="noopener">http://sirm2z.github.io/react-vue-test/react/index.html</a><br>vue项目地址：<a href="http://sirm2z.github.io/react-vue-test/vue/index.html" target="_blank" rel="noopener">http://sirm2z.github.io/react-vue-test/vue/index.html</a><br>通过对比发现，react 在正常使用的过程中产生了多余的渲染，在移动端或者组件嵌套非常深的情况下会产生非常大的性能消耗，因此在使用 react 的过程中，写好 react 生命周期中的 shouldComponentUpdate 是非常重要的！</p>
<p>所有资源<br>完整代码： <a href="https://github.com/SirM2z/assets/blob/master/vue-demo.js" target="_blank" rel="noopener">https://github.com/SirM2z/assets/blob/master/vue-demo.js</a><br>PPT网址： <a href="http://sirm2z.github.io/vue-demo-ppt/index.html" target="_blank" rel="noopener">http://sirm2z.github.io/vue-demo-ppt/index.html</a><br>博客文章网址： <a href="http://www.jianshu.com/p/7374c4e91891" target="_blank" rel="noopener">http://www.jianshu.com/p/7374c4e91891</a><br>react项目地址： <a href="http://sirm2z.github.io/react-vue-test/react/index.html" target="_blank" rel="noopener">http://sirm2z.github.io/react-vue-test/react/index.html</a><br>vue项目地址： <a href="http://sirm2z.github.io/react-vue-test/vue/index.html" target="_blank" rel="noopener">http://sirm2z.github.io/react-vue-test/vue/index.html</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/02/20180802JavaScriptCore的说明/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yida">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="益达的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/02/20180802JavaScriptCore的说明/" itemprop="url">JavaScriptCore</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-02T10:11:12+08:00">
                2018-08-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>关于javaScriptCore</p>
<p>JSContext是JS代码的执行环境<br>JSContext为JS代码的执行提供了上下文环境，通过JSCore执行的js代码都得通过JSContext来执行</p>
<p>JSContext对应于一个JS中的全局对象</p>
<p>JSValue是对JS值的包装，JS值到OC中不能直接使用，JSValue就是对JS值的包装，<br><img src="https://upload-images.jianshu.io/upload_images/762048-c669c91024c9308b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/491" alt=""></p>
<p>JSValue存在于JSValue是不能独立存在的，它必须被存在某一个Context中，JSValue对应的JS值和其所属的JSContext的对象都是强弱引用的关系。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">context[@"makeNSColor"] = ^(NSDictionary *rgb)&#123;</span><br><span class="line">       float r = [rgb[@"red"] floatValue];</span><br><span class="line">       float g = [rgb[@"green"] floatValue];</span><br><span class="line">       float b = [rgb[@"blue"] floatValue];</span><br><span class="line">       return [UIColor</span><br><span class="line">               colorWithRed:(r/255.f)</span><br><span class="line">               green:(g/255.f) blue:(b/255.f)</span><br><span class="line">               alpha:1.0];</span><br><span class="line">   &#125;;</span><br><span class="line">   JSValue *value1 = [context evaluateScript:@"makeNSColor(&#123;red:12,green:23,blue:67&#125;)"];</span><br></pre></td></tr></table></figure>
<p>使用Block暴露方法很方便，但是有2个坑需要注意一下：</p>
<p>1.不要在Block中直接使用JSValue<br>2.不要在Block中直接使用JSContext</p>
<p>因为Block会强引用它里面用到的外部变量，如果直接在Block中使用JSValue的话，那么这个JSvalue就会被这个Block强引用，而每个JSValue都是强引用着它所属的那个JSContext的，这是前面说过的，而这个Block又是注入到这个Context中，所以这个Block会被context强引用，这样会造成循环引用，导致内存泄露。不能直接使用JSContext的原因同理。</p>
<p>针对第一点，建议把JSValue当做参数传到Block中，而不是直接在Block内部使用，这样Block就不会强引用JSValue了。</p>
<p>针对第二点，可以使用[JSContext currentContext] 方法来获取当前的Context。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@protocol MyPointExports <span class="tag">&lt;<span class="name">JSExport</span>&gt;</span></span><br><span class="line"></span><br><span class="line">声明一个自定义的协议并继承自JSExport协议。然后当你把实现这个自定义协议的对象暴露给JS时，JS就能像使用原生对象一样使用OC对象了，也就是前面说的API目标之高保真。</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/762048-3ae18cd8c1e4bdfc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/497" alt=""></p>
<p>当你声明一个继承自JSExport的自定义协议时，就是在告诉JSCore，这个自定义协议中声明的属性，实例方法和类方法需要被暴露给JS使用。（不在这个协议中的方法不会被暴露出去。）</p>
<p>当你把实现这个协议的类的对象暴露给JS时，JS中会生成一个对应的JS对象，然后，JSCore会按照这个协议中声明的内容，去遍历实现这个协议的类，把协议中声明的属性，转换成JS 对象中的属性，实质上是转换成getter 和 setter 方法，转换方法和之前说的block类似，创建一个JS方法包装着OC中的方法，然后协议中声明的实例方法，转换成JS对象上的实例方法，类方法转换成JS中某个全局对象上的方法。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/762048-be5d18cdb7bb7df5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/599" alt=""></p>
<p>我们有一个MyPoint类的对象point，当我们用JSExport协议将这个OC对象暴露给JS时，JSCore首先会在JS上下文环境中为该类生成一个对应的原型对象和构造函数，然后JSCore会扫描这个类，把其中在JSExport协议中声明的内容暴露给JS，属性(即getter和setter方法)会被添加到原型对象上，而类方法会被添加到到这个构造函数上，这个放的位置，就正好对应了OC中的类和元类。</p>
<p>不要在JS中给OC对象增加成员变量，这句话的意思就是说，当我们将一个OC对象暴露给JS后，就像前面说的使用JSExport协议，我们能想操纵JS对象一样操纵OC对象，但是这时候，不要在JS中给这个OC对象添加成员变量，因为这个动作产生的后果就是，只会在JS中为这个OC对象增加一个额外的成员变量，但是OC中并不会同步增加。所以说这样做并没有什么意义，还有可能造成一些奇怪的内存管理问题。</p>
<p>OC对象不要直接强引用JSValue对象，这句话再说直白点，就是不要直接将一个JSValue类型的对象当成属性或者成员变量保存在一个OC对象中，尤其是这个OC对象还暴露给JS的时候。这样会造成循环引用。</p>
<p>用JSManagedValue来解决强引用的问题：<br>，用JSValue创建一个JSManagedValue对象，JSManagedValue里面其实就是包着一个JSValue对象，可以通过它里面一个只读的value属性取到，这一步其实是添加一个对JSValue的弱引用。</p>
<p>说多线程之前得先说下另一个类 JSVirtualMachine, 它为JavaScript的运行提供了底层资源，有自己独立的堆栈以及垃圾回收机制。</p>
<p>JSVirtualMachine还是JSContext的容器，可以包含若干个JSContext，在一个进程中，你可以有多个JSVirtualMachine，里面包含着若干个JSContext，而JSContext中又有若干个JSValue，他们的包含关系如下图：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/762048-8b482ac389babfc2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/01/20180801flexBox布局/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yida">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="益达的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/01/20180801flexBox布局/" itemprop="url">Flex 布局</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-08-01T10:11:12+08:00">
                2018-08-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>关于flex的布局：</p>
<p>Webkit内核的浏览器，必须加上-webkit前缀<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">  display: -webkit-flex; /* Safari */</span><br><span class="line">  display: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="基础概念："><a href="#基础概念：" class="headerlink" title="基础概念："></a>基础概念：</h4><p><img src="http://www.runoob.com/wp-content/uploads/2015/07/3791e575c48b3698be6a94ae1dbff79d.png" alt=""></p>
<p>容器默认存在两根轴：水平的主轴（main axis）和垂直的交叉轴（cross axis）。主轴的开始位置（与边框的交叉点）叫做main start，结束位置叫做main end；交叉轴的开始位置叫做cross start，结束位置叫做cross end。</p>
<p>项目默认沿主轴排列。单个项目占据的主轴空间叫做main size，占据的交叉轴空间叫做cross size.</p>
<h4 id="容器的属性："><a href="#容器的属性：" class="headerlink" title="容器的属性："></a>容器的属性：</h4><ol>
<li>flex-direction属性决定主轴的方向（即项目的排列方向）。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  flex-direction: row | row-reverse | column | column-reverse;</span><br><span class="line">&#125;</span><br><span class="line">row（默认值）：主轴为水平方向，起点在左端。</span><br><span class="line">row-reverse：主轴为水平方向，起点在右端。</span><br><span class="line">column：主轴为垂直方向，起点在上沿。</span><br><span class="line">column-reverse：主轴为垂直方向，起点在下沿。</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="http://www.runoob.com/wp-content/uploads/2015/07/0cbe5f8268121114e87d0546e53cda6e.png" alt=""></p>
<ol start="2">
<li>flex-wrap属性<br>默认情况下，项目都排在一条线（又称”轴线”）上。flex-wrap属性定义，如果一条轴线排不下，如何换行。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">  flex-wrap: nowrap | wrap | wrap-reverse;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>（1）nowrap（默认）：不换行。<br><img src="http://www.runoob.com/wp-content/uploads/2015/07/9da1f23965756568b4c6ea7124db7b9a.png" alt=""><br>（2）wrap：换行，第一行在上方。<br><img src="http://www.runoob.com/wp-content/uploads/2015/07/3c6b3c8b8fe5e26bca6fb57538cf72d9.jpg" alt=""><br>（3）wrap-reverse：换行，第一行在下方。<br><img src="http://www.runoob.com/wp-content/uploads/2015/07/fb4cf2bab8b6b744b64f6d7a99cd577c.jpg" alt=""></p>
<ol start="3">
<li><p>flex-flow<br>flex-flow属性是flex-direction属性和flex-wrap属性的简写形式，默认值为row nowrap。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  flex-flow: <span class="tag">&lt;<span class="name">flex-direction</span>&gt;</span> || <span class="tag">&lt;<span class="name">flex-wrap</span>&gt;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>justify-content属性<br>justify-content属性定义了项目在主轴上的对齐方式。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  justify-content: flex-start | flex-end | center | space-between | space-around;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>flex-start（默认值）：左对齐<br>flex-end：右对齐<br>center： 居中<br>space-between：两端对齐，项目之间的间隔都相等。<br>space-around：每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍。<br><img src="http://www.runoob.com/wp-content/uploads/2015/07/c55dfe8e3422458b50e985552ef13ba5.png" alt=""></p>
<ol start="4">
<li>align-items属性<br>align-items属性定义项目在交叉轴上如何对齐。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  align-items: flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>flex-start：交叉轴的起点对齐。<br>flex-end：交叉轴的终点对齐。<br>center：交叉轴的中点对齐。<br>baseline: 项目的第一行文字的基线对齐。<br>stretch（默认值）：如果项目未设置高度或设为auto，将占满整个容器的高度。<br><img src="http://www.runoob.com/wp-content/uploads/2015/07/2b0c39c7e7a80d5a784c8c2ca63cde17.png" alt=""></p>
<ol start="6">
<li>align-content属性<br>align-content属性定义了多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用。<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.box &#123;</span><br><span class="line">  align-content: flex-start | flex-end | center | space-between | space-around | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>flex-start：与交叉轴的起点对齐。<br>flex-end：与交叉轴的终点对齐。<br>center：与交叉轴的中点对齐。<br>space-between：与交叉轴两端对齐，轴线之间的间隔平均分布。<br>space-around：每根轴线两侧的间隔都相等。所以，轴线之间的间隔比轴线与边框的间隔大一倍。<br>stretch（默认值）：轴线占满整个交叉轴。<br><img src="http://www.runoob.com/wp-content/uploads/2015/07/f10918ccb8a13247c9d47715a2bd2c33.png" alt=""></p>
<h4 id="项目属性"><a href="#项目属性" class="headerlink" title="项目属性"></a>项目属性</h4><p>1.order属性<br>order属性定义项目的排列顺序。数值越小，排列越靠前，默认为0。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  order: <span class="tag">&lt;<span class="name">integer</span>&gt;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.runoob.com/wp-content/uploads/2015/07/59e399c72daafcfcc20ede36bf32f266.png" alt=""></p>
<p>2.flex-grow属性<br>flex-grow属性定义项目的放大比例，默认为0，即如果存在剩余空间，也不放大。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  flex-grow: <span class="tag">&lt;<span class="name">number</span>&gt;</span>; /* default 0 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="http://www.runoob.com/wp-content/uploads/2015/07/f41c08bb35962ed79e7686f735d6cd78.png" alt=""><br>如果所有项目的flex-grow属性都为1，则它们将等分剩余空间（如果有的话）。如果一个项目的flex-grow属性为2，其他项目都为1，则前者占据的剩余空间将比其他项多一倍。</p>
<p>3.flex-shrink属性<br>flex-shrink属性定义了项目的缩小比例，默认为1，即如果空间不足，该项目将缩小。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  flex-shrink: <span class="tag">&lt;<span class="name">number</span>&gt;</span>; /* default 1 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://www.runoob.com/wp-content/uploads/2015/07/240d3e960043a729bb3ff5e34987904f.jpg" alt=""><br>如果所有项目的flex-shrink属性都为1，当空间不足时，都将等比例缩小。如果一个项目的flex-shrink属性为0，其他项目都为1，则空间不足时，前者不缩小。<br>负值对该属性无效。</p>
<p>4.flex-basis属性<br>flex-basis属性定义了在分配多余空间之前，项目占据的主轴空间（main size）。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为auto，即项目的本来大小。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  flex-basis: <span class="tag">&lt;<span class="name">length</span>&gt;</span> | auto; /* default auto */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>它可以设为跟width或height属性一样的值（比如350px），则项目将占据固定空间。</p>
<p>5.flex属性<br>flex属性是flex-grow, flex-shrink 和 flex-basis的简写，默认值为0 1 auto。后两个属性可选。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  flex: none | [ <span class="tag">&lt;<span class="name">'flex-grow'</span>&gt;</span> <span class="tag">&lt;<span class="name">'flex-shrink'</span>&gt;</span>? || <span class="tag">&lt;<span class="name">'flex-basis'</span>&gt;</span> ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>该属性有两个快捷值：auto (1 1 auto) 和 none (0 0 auto)。<br>建议优先使用这个属性，而不是单独写三个分离的属性，因为浏览器会推算相关值。</p>
<p>6.align-self属性<br>align-self属性允许单个项目有与其他项目不一样的对齐方式，可覆盖align-items属性。默认值为auto，表示继承父元素的align-items属性，如果没有父元素，则等同于stretch。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.item &#123;</span><br><span class="line">  align-self: auto | flex-start | flex-end | center | baseline | stretch;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="http://www.runoob.com/wp-content/uploads/2015/07/55b19171b8b6b9487d717bf2ecbba6de.png" alt=""></p>
<p>该属性可能取6个值，除了auto，其他都与align-items属性完全一致。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/03/20180703语法的权限测试/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yida">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="益达的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/03/20180703语法的权限测试/" itemprop="url">join</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-03T10:11:12+08:00">
                2018-07-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>join的语法集合：</p>
<p>join fileone filetwo 根据文件的第一个域空间进行数据merge</p>
<p>join -1 2 -2 3 fileone filetwo 根据文件的指定域空间 进行数据merge</p>
<p>关于 awk的使用：</p>
<p>awk ‘{[pattern] action}’ {filenames}</p>
<p>awk ‘{print $1,$4}’ log.txt  没行按照tab分割</p>
<p>awk -F  #-F相当于内置变量FS, 指定分割字符</p>
<p>awk -F, ‘{print $1,$2}’   log.txt 按照，分割</p>
<p>awk -F ‘[ ,]’  ‘{print $1,$2,$5}’   log.txt 背景</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/02/20180702shell高阶预发的使用说明/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yida">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="益达的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/02/20180702shell高阶预发的使用说明/" itemprop="url">join的语法集合</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-02T10:11:12+08:00">
                2018-07-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>join的语法集合：</p>
<p>join fileone filetwo 根据文件的第一个域空间进行数据merge</p>
<p>join -1 2 -2 3 fileone filetwo 根据文件的指定域空间 进行数据merge</p>
<p>关于 awk的使用：</p>
<p>awk ‘{[pattern] action}’ {filenames}</p>
<p>awk ‘{print $1,$4}’ log.txt  没行按照tab分割</p>
<p>awk -F  #-F相当于内置变量FS, 指定分割字符</p>
<p>awk -F, ‘{print $1,$2}’   log.txt 按照，分割</p>
<p>awk -F ‘[ ,]’  ‘{print $1,$2,$5}’   log.txt 背景</p>
<p>who | awk ‘{print $1}’ | sort -u</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">yida</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">36</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yida</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
